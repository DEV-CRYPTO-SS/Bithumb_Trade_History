javascript: (() => { const e = document.getElementById("bithumb-export-panel"); if (e) return void e.remove(); let t = !1; function n(e) { const [t, n] = e.split(" "), [o, r, a] = t.split("-").map(Number), [i, d, s] = n.split(":").map(Number); return new Date(o, r - 1, a, i, d, s) } function o(e) { return e && "-" !== e ? Number(e.replace(/[,+]/g, "")) : 0 } function r(e, t = null, r = null, a = null, i = null) { let d = e; t && (d = d.filter(e => e.type === t)), r && (d = d.filter(e => e.assetName.includes(r) || e.assetPair.includes(r))), (a || i) && (d = d.filter(e => { const t = n(e.date); return !(a && t < a) && !(i && t > i) })); const s = { count: d.length, totalSettlement: 0, totalFee: 0, totalAmount: 0, buyCount: 0, sellCount: 0, buyAmount: 0, sellAmount: 0, depositCount: 0, withdrawCount: 0, types: {}, assets: {} }; return d.forEach(e => { const t = o(e.settlement), n = o(e.fee), r = o(e.amount), a = "ì›" === e.settlementUnit, i = "ì›" === e.feeUnit; a && (s.totalSettlement += t), i && (s.totalFee += n), s.totalAmount += Math.abs(r), s.types[e.type] || (s.types[e.type] = { count: 0, settlement: 0, fee: 0 }), s.types[e.type].count++, a && (s.types[e.type].settlement += t), i && (s.types[e.type].fee += n); const d = e.assetPair || e.assetName; s.assets[d] || (s.assets[d] = { count: 0, settlement: 0, fee: 0 }), s.assets[d].count++, a && (s.assets[d].settlement += t), i && (s.assets[d].fee += n), "ë§¤ìˆ˜" === e.type ? (s.buyCount++, a && (s.buyAmount += Math.abs(t))) : "ë§¤ë„" === e.type ? (s.sellCount++, a && (s.sellAmount += Math.abs(t))) : e.type.includes("ì…ê¸ˆ") ? s.depositCount++ : e.type.includes("ì¶œê¸ˆ") && s.withdrawCount++ }), { stats: s, filtered: d } } function a(e) { const t = document.createElement("div"); t.textContent = e, t.style.cssText = "\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 16px 24px;\n            border-radius: 12px;\n            box-shadow: 0 8px 32px rgba(0,0,0,0.3);\n            z-index: 100001;\n            font-weight: 600;\n            animation: slideIn 0.3s ease-out;\n        ", document.body.appendChild(t), setTimeout(() => { t.style.animation = "slideOut 0.3s ease-out", setTimeout(() => t.remove(), 300) }, 2e3) } const i = function () { const e = document.querySelectorAll('[role="row"]'), t = []; return e.forEach(e => { const n = e.querySelector('[class*="list-content-item--order-date"]'), o = e.querySelector('[class*="list-content-item--asset"]'), r = e.querySelector('[class*="list-content-item--type"]'), a = e.querySelectorAll('[role="cell"]')[3], i = e.querySelector('[class*="count-unit-price"]'), d = e.querySelectorAll('[role="cell"]')[5], s = e.querySelectorAll('[role="cell"]')[6], l = e.querySelector('[class*="list-content-item--up"], [class*="list-content-item--down"]'), p = e.querySelector('[class*="list-content-item--status"]'); if (!n || !o || !r) return; const c = n.textContent.trim(), x = o.childNodes[0]?.textContent?.trim() || "", u = o.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", g = r.textContent.trim(), b = a?.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", m = i?.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", f = d?.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", y = s?.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", h = l?.querySelector(".AutoScale_auto-scale__nPrFi span")?.textContent?.trim() || "", v = p?.textContent?.trim() || "", w = s?.querySelector(".TradeHistory_trade-history__content-sub-item__MFZHO")?.textContent?.trim() || "", k = l?.querySelector(".TradeHistory_trade-history__content-sub-item__MFZHO")?.textContent?.trim() || ""; t.push({ date: c, assetName: x, assetPair: u, type: g, quantity: b, price: m, amount: f, fee: y, feeUnit: w, settlement: h, settlementUnit: k, status: v }) }), t }(); let d = { type: null, asset: null, search: "", searchInput: "", dateFrom: null, dateTo: null }; const s = document.createElement("div"); s.id = "bithumb-export-panel", s.innerHTML = `\n        <style>\n            @keyframes slideIn {\n                from { transform: translateX(100%); opacity: 0; }\n                to { transform: translateX(0); opacity: 1; }\n            }\n            @keyframes slideOut {\n                from { transform: translateX(0); opacity: 1; }\n                to { transform: translateX(100%); opacity: 0; }\n            }\n            @keyframes fadeIn {\n                from { opacity: 0; transform: scale(0.95); }\n                to { opacity: 1; transform: scale(1); }\n            }\n            #bithumb-export-panel * {\n                box-sizing: border-box;\n            }\n            #bithumb-export-panel::-webkit-scrollbar {\n                width: 8px;\n            }\n            #bithumb-export-panel::-webkit-scrollbar-track {\n                background: #f1f5f9;\n                border-radius: 10px;\n            }\n            #bithumb-export-panel::-webkit-scrollbar-thumb {\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                border-radius: 10px;\n            }\n        </style>\n        <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 99999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(4px); animation: fadeIn 0.3s ease-out;" id="overlay">\n            <div style="background: linear-gradient(135deg, #f6f8fb 0%, #e9ecef 100%); width: 90%; max-width: 1200px; max-height: 90vh; border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; animation: fadeIn 0.3s ease-out;">\n                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 24px 32px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">\n                    <div>\n                        <h2 style="margin: 0; color: white; font-size: 24px; font-weight: 700; letter-spacing: -0.5px;">ğŸ“Š ë¹—ì¸ ê±°ë˜ ë‚´ì—­ ë¶„ì„</h2>\n                        <p style="margin: 4px 0 0 0; color: rgba(255,255,255,0.9); font-size: 14px;">ì´ ${i.length}ê±´ì˜ ê±°ë˜ ë°ì´í„°</p>\n                    </div>\n                    <button id="close-panel" style="background: rgba(255,255,255,0.2); border: 2px solid rgba(255,255,255,0.3); color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 20px; font-weight: bold; transition: all 0.3s; display: flex; align-items: center; justify-content: center;">Ã—</button>\n                </div>\n                <div id="bithumb-export-panel-content" style="padding: 32px; overflow-y: auto; max-height: calc(90vh - 100px);"></div>\n            </div>\n        </div>\n    `, document.body.appendChild(s), function e() { const { stats: s } = r(i), { stats: l, filtered: p } = r(i, d.type, d.asset, d.dateFrom, d.dateTo), c = d.search ? p.filter(e => Object.values(e).some(e => String(e).toLowerCase().includes(d.search.toLowerCase()))) : p, x = document.getElementById("bithumb-export-panel-content"); if (!x) return; const u = i.map(e => n(e.date)), g = new Date(Math.max(...u)), b = e => `${e.getFullYear()}-${String(e.getMonth() + 1).padStart(2, "0")}-${String(e.getDate()).padStart(2, "0")}`; x.innerHTML = `\n            <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">\n                <div style="flex: 1; min-width: 250px; display: flex; gap: 8px;">\n                    <input type="text" id="search-input" placeholder="ğŸ” ê²€ìƒ‰..." \n                        value="${d.searchInput}"\n                        style="flex: 1; padding: 12px 16px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; outline: none; transition: all 0.3s;">\n                    <button id="search-btn" style="padding: 12px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s; white-space: nowrap;">\n                        ê²€ìƒ‰\n                    </button>\n                </div>\n                <select id="type-filter" style="padding: 12px 16px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; outline: none; cursor: pointer; background: white;">\n                    <option value="">ì „ì²´ ê±°ë˜êµ¬ë¶„</option>\n                    ${Object.keys(s.types).map(e => `<option value="${e}" ${d.type === e ? "selected" : ""}>${e} (${s.types[e].count})</option>`).join("")}\n                </select>\n                <select id="asset-filter" style="padding: 12px 16px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; outline: none; cursor: pointer; background: white;">\n                    <option value="">ì „ì²´ ìì‚°</option>\n                    ${Object.keys(s.assets).map(e => `<option value="${e}" ${d.asset === e ? "selected" : ""}>${e} (${s.assets[e].count})</option>`).join("")}\n                </select>\n            </div>\n\n            <div style="background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px;">\n                <h3 style="margin: 0 0 12px 0; font-size: 16px; color: #1e293b; display: flex; align-items: center; gap: 8px;">\n                    ğŸ“… ê¸°ê°„ í•„í„° & ìë™ ë°ì´í„° ë¡œë”©\n                </h3>\n                <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-bottom: 16px;">\n                    <div style="display: flex; align-items: center; gap: 8px;">\n                        <label style="font-size: 14px; color: #64748b; font-weight: 500;">ì‹œì‘ì¼:</label>\n                        <input type="date" id="date-from" \n                            value="${d.dateFrom ? b(d.dateFrom) : ""}"\n                            max="${b(g)}"\n                            style="padding: 10px 14px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; outline: none; cursor: pointer;">\n                    </div>\n                    <div style="display: flex; align-items: center; gap: 8px;">\n                        <label style="font-size: 14px; color: #64748b; font-weight: 500;">ì¢…ë£Œì¼:</label>\n                        <input type="date" id="date-to" \n                            value="${d.dateTo ? b(d.dateTo) : ""}"\n                            max="${b(g)}"\n                            style="padding: 10px 14px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; outline: none; cursor: pointer;">\n                    </div>\n                    <button id="apply-date-filter" style="padding: 10px 20px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s;">\n                        ì ìš©\n                    </button>\n                    <button id="clear-date-filter" style="padding: 10px 20px; background: #f1f5f9; color: #64748b; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s;">\n                        ì´ˆê¸°í™”\n                    </button>\n                    ${d.dateFrom || d.dateTo ? `\n                        <div style="padding: 8px 16px; background: #dbeafe; color: #1e40af; border-radius: 8px; font-size: 13px; font-weight: 600;">\n                            ${d.dateFrom ? b(d.dateFrom) : "ì‹œì‘"} ~ ${d.dateTo ? b(d.dateTo) : "ì¢…ë£Œ"}\n                        </div>\n                    ` : ""}\n                </div>\n                \n                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 16px; border-radius: 12px; border: 2px solid #fbbf24;">\n                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">\n                        <span style="font-size: 20px;">ğŸš€</span>\n                        <h4 style="margin: 0; font-size: 15px; color: #78350f; font-weight: 700;">ìë™ ë°ì´í„° ë¡œë”©</h4>\n                    </div>\n                    <p style="margin: 0 0 12px 0; font-size: 13px; color: #92400e; line-height: 1.5;">\n                        íŠ¹ì • ë‚ ì§œê¹Œì§€ì˜ ëª¨ë“  ê±°ë˜ ë‚´ì—­ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. "ë”ë³´ê¸°" ë²„íŠ¼ì„ ìë™ìœ¼ë¡œ í´ë¦­í•˜ì—¬ ë°ì´í„°ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤.\n                    </p>\n                    <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">\n                        <label style="font-size: 14px; color: #78350f; font-weight: 600;">ëª©í‘œ ë‚ ì§œ:</label>\n                        <input type="date" id="auto-load-target-date" \n                            max="${b(g)}"\n                            style="padding: 10px 14px; border: 2px solid #fbbf24; border-radius: 10px; font-size: 14px; outline: none; cursor: pointer; background: white;">\n                        <button id="start-auto-load" style="padding: 10px 24px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; font-size: 14px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);">\n                            âš¡ ìë™ ë¡œë”© ì‹œì‘\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">\n                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 16px; color: white; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);">\n                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ì´ ê±°ë˜ ê±´ìˆ˜</div>\n                    <div style="font-size: 32px; font-weight: 700;">${c.length}</div>\n                </div>\n                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; border-radius: 16px; color: white; box-shadow: 0 4px 20px rgba(240, 147, 251, 0.4);">\n                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ì´ ì •ì‚°ê¸ˆì•¡</div>\n                    <div style="font-size: 28px; font-weight: 700;">${l.totalSettlement.toLocaleString()}</div>\n                </div>\n                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 20px; border-radius: 16px; color: white; box-shadow: 0 4px 20px rgba(79, 172, 254, 0.4);">\n                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ì´ ìˆ˜ìˆ˜ë£Œ</div>\n                    <div style="font-size: 28px; font-weight: 700;">${l.totalFee.toLocaleString()}</div>\n                </div>\n                <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 20px; border-radius: 16px; color: white; box-shadow: 0 4px 20px rgba(67, 233, 123, 0.4);">\n                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ë§¤ìˆ˜ / ë§¤ë„</div>\n                    <div style="font-size: 24px; font-weight: 700;">${l.buyCount} / ${l.sellCount}</div>\n                </div>\n            </div>\n\n            <div style="background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px;">\n                <h3 style="margin: 0 0 16px 0; font-size: 18px; color: #1e293b;">ê±°ë˜ ìœ í˜•ë³„ í†µê³„</h3>\n                <div style="display: grid; gap: 12px;">\n                    ${Object.entries(l.types).map(([e, t]) => `\n                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8fafc; border-radius: 10px;">\n                            <div>\n                                <span style="font-weight: 600; color: #334155;">${e}</span>\n                                <span style="color: #64748b; margin-left: 8px;">${t.count}ê±´</span>\n                            </div>\n                            <div style="text-align: right;">\n                                <div style="font-weight: 600; color: ${t.settlement >= 0 ? "#10b981" : "#ef4444"};">\n                                    ${t.settlement >= 0 ? "+" : ""}${t.settlement.toLocaleString()}\n                                </div>\n                                <div style="font-size: 12px; color: #94a3b8;">ìˆ˜ìˆ˜ë£Œ: ${t.fee.toLocaleString()}</div>\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n\n            <div style="background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px;">\n                <h3 style="margin: 0 0 16px 0; font-size: 18px; color: #1e293b;">ê±°ë˜ ë‚´ì—­ (${c.length}ê±´)</h3>\n                <div style="max-height: 400px; overflow-y: auto; border-radius: 8px; border: 1px solid #e2e8f0;">\n                    <table style="width: 100%; border-collapse: collapse; font-size: 13px;">\n                        <thead style="position: sticky; top: 0; background: #f1f5f9; z-index: 1;">\n                            <tr>\n                                <th style="padding: 12px 8px; text-align: left; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">ì¼ì‹œ</th>\n                                <th style="padding: 12px 8px; text-align: left; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">ìì‚°</th>\n                                <th style="padding: 12px 8px; text-align: left; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">êµ¬ë¶„</th>\n                                <th style="padding: 12px 8px; text-align: right; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">ìˆ˜ëŸ‰</th>\n                                <th style="padding: 12px 8px; text-align: right; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">ê°€ê²©</th>\n                                <th style="padding: 12px 8px; text-align: right; border-bottom: 2px solid #e2e8f0; color: #475569; font-weight: 600;">ì •ì‚°ê¸ˆì•¡</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${c.slice(0, 100).map((e, t) => `\n                                <tr style="border-bottom: 1px solid #f1f5f9; ${t % 2 == 0 ? "background: #fafafa;" : ""}">\n                                    <td style="padding: 10px 8px; color: #64748b;">${e.date}</td>\n                                    <td style="padding: 10px 8px; font-weight: 500; color: #334155;">${e.assetPair || e.assetName}</td>\n                                    <td style="padding: 10px 8px;">\n                                        <span style="padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 600; \n                                            ${"ë§¤ìˆ˜" === e.type ? "background: #dbeafe; color: #1e40af;" : "ë§¤ë„" === e.type ? "background: #fee2e2; color: #991b1b;" : "background: #f3f4f6; color: #374151;"}">\n                                            ${e.type}\n                                        </span>\n                                    </td>\n                                    <td style="padding: 10px 8px; text-align: right; color: #475569;">${e.quantity}</td>\n                                    <td style="padding: 10px 8px; text-align: right; color: #475569;">${e.price}</td>\n                                    <td style="padding: 10px 8px; text-align: right; font-weight: 600; \n                                        color: ${o(e.settlement) >= 0 ? "#10b981" : "#ef4444"};">\n                                        ${e.settlement}\n                                    </td>\n                                </tr >\n            `).join("")}\n                            ${c.length > 100 ? '\n                                <tr>\n                                    <td colspan="6" style="padding: 16px; text-align: center; color: #94a3b8; font-style: italic;">\n                                        ì²˜ìŒ 100ê±´ë§Œ í‘œì‹œë©ë‹ˆë‹¤. CSVë¡œ ë‚´ë³´ë‚´ê¸°í•˜ì—¬ ì „ì²´ ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.\n                                    </td>\n                                </tr>\n                            ' : ""}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <div style="display: flex; gap: 12px; flex-wrap: wrap;">\n                <button id="export-csv" style="flex: 1; min-width: 150px; padding: 14px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">\n                    ğŸ“¥ CSV ë‚´ë³´ë‚´ê¸°\n                </button>\n                <button id="copy-stats" style="flex: 1; min-width: 150px; padding: 14px 24px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);">\n                    ğŸ“‹ í†µê³„ ë³µì‚¬\n                </button>\n                <button id="reset-filter" style="flex: 1; min-width: 150px; padding: 14px 24px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);">\n                    ğŸ”„ í•„í„° ì´ˆê¸°í™”\n                </button>\n            </div>\n        `; const m = document.getElementById("search-input"); m.addEventListener("input", e => { d.searchInput = e.target.value }), document.getElementById("search-btn").addEventListener("click", () => { d.search = d.searchInput, e() }), m.addEventListener("keypress", t => { "Enter" === t.key && (d.search = d.searchInput, e()) }), document.getElementById("type-filter").addEventListener("change", t => { d.type = t.target.value || null, e() }), document.getElementById("asset-filter").addEventListener("change", t => { d.asset = t.target.value || null, e() }), document.getElementById("apply-date-filter").addEventListener("click", () => { const t = document.getElementById("date-from").value, n = document.getElementById("date-to").value; if (t) { const [e, n, o] = t.split("-").map(Number); d.dateFrom = new Date(e, n - 1, o, 0, 0, 0) } if (n) { const [e, t, o] = n.split("-").map(Number); d.dateTo = new Date(e, t - 1, o, 23, 59, 59) } e() }), document.getElementById("clear-date-filter").addEventListener("click", () => { d.dateFrom = null, d.dateTo = null, e() }), document.getElementById("start-auto-load").addEventListener("click", () => { const e = document.getElementById("auto-load-target-date").value; if (!e) return void a("âš ï¸ ëª©í‘œ ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”."); const [o, r, i] = e.split("-").map(Number), d = new Date(o, r - 1, i, 0, 0, 0), s = document.querySelectorAll('[role="row"]'); let l = null; for (let e = s.length - 1; e >= 0; e--) { const t = s[e].querySelector('[class*="list-content-item--order-date"]'); if (t && t.textContent.trim()) { l = n(t.textContent.trim()); break } } l && l <= d ? a("âœ… ì´ë¯¸ ëª©í‘œ ë‚ ì§œê¹Œì§€ì˜ ë°ì´í„°ê°€ ë¡œë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.") : (document.getElementById("bithumb-export-panel").remove(), async function (e) { if (t) return void a("ì´ë¯¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤."); t = !0; let o = 0; const r = document.createElement("div"); r.id = "auto-loading-panel", r.style.cssText = "\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background: white;\n            padding: 32px 48px;\n            border-radius: 20px;\n            box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n            z-index: 100000;\n            text-align: center;\n            min-width: 400px;\n        ", r.innerHTML = `\n            <div style="font-size: 48px; margin-bottom: 16px;">â³</div>\n            <h3 style="margin: 0 0 12px 0; font-size: 20px; color: #1e293b;">ë°ì´í„° ìë™ ë¡œë”© ì¤‘...</h3>\n            <p style="margin: 0 0 20px 0; color: #64748b; font-size: 14px;">\n                ëª©í‘œ ë‚ ì§œ: <strong>${e.toLocaleDateString()}</strong>\n            </p>\n            <div style="background: #f1f5f9; padding: 16px; border-radius: 12px; margin-bottom: 20px;">\n                <div style="font-size: 32px; font-weight: 700; color: #667eea; margin-bottom: 8px;" id="click-count">0</div>\n                <div style="font-size: 14px; color: #64748b;">í´ë¦­ íšŸìˆ˜</div>\n            </div>\n            <div style="background: #fef3c7; padding: 12px; border-radius: 10px; margin-bottom: 16px;">\n                <div style="font-size: 13px; color: #92400e;">\n                    <strong>í˜„ì¬ ìµœí•˜ë‹¨ ë‚ ì§œ:</strong> <span id="current-oldest-date">í™•ì¸ ì¤‘...</span>\n                </div>\n            </div>\n            <button id="stop-loading" style="padding: 12px 32px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 14px; transition: all 0.3s;">\n                ì¤‘ì§€\n            </button>\n        `, document.body.appendChild(r), document.getElementById("stop-loading").addEventListener("click", () => { t = !1, r.remove(), a("ë°ì´í„° ë¡œë”©ì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.") }); const i = () => new Promise(t => { const r = document.querySelector(".TradeHistory_trade-history__button-more__LhYqK"); if (!r) return void t({ success: !1, reason: "button_not_found" }); const a = document.querySelectorAll('[role="row"]'); let i = null; for (let e = a.length - 1; e >= 0; e--) { const t = a[e].querySelector('[class*="list-content-item--order-date"]'); if (t && t.textContent.trim()) { i = n(t.textContent.trim()); break } } const d = document.getElementById("current-oldest-date"); d && i && (d.textContent = i.toLocaleString()), i && i <= e ? t({ success: !0, reason: "target_reached", oldestDate: i }) : (o++, document.getElementById("click-count").textContent = o, r.click(), setTimeout(() => { t({ success: !0, reason: "continue" }) }, 500)) }); try { for (; t && o < 1e3;) { const e = await i(); if (!e.success) { r.remove(), t = !1, a("ë”ë³´ê¸° ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."); break } if ("target_reached" === e.reason) { r.remove(), t = !1, a(`âœ… ëª©í‘œ ë‚ ì§œê¹Œì§€ ëª¨ë“  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! (${o}íšŒ í´ë¦­)`); const e = document.getElementById("bithumb-export-panel"); e && (e.remove(), setTimeout(() => { document.querySelector('a[href*="bithumb_trade_export"]')?.click() }, 500)); break } } o >= 1e3 && (r.remove(), t = !1, a("âš ï¸ ìµœëŒ€ í´ë¦­ íšŸìˆ˜ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. ë” ì˜¤ë˜ëœ ë°ì´í„°ê°€ í•„ìš”í•˜ë©´ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”.")) } catch (e) { r.remove(), t = !1, a("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.message) } }(d)) }), document.getElementById("export-csv").addEventListener("click", () => { !function (e) { const t = [["ê±°ë˜ì¼ì‹œ", "ìì‚°ëª…", "ê±°ë˜ìŒ", "ê±°ë˜êµ¬ë¶„", "ê±°ë˜ìˆ˜ëŸ‰", "ì²´ê²°ê°€ê²©", "ê±°ë˜ê¸ˆì•¡", "ìˆ˜ìˆ˜ë£Œ", "ì •ì‚°ê¸ˆì•¡", "ìƒíƒœ"], ...e.map(e => [e.date, e.assetName, e.assetPair, e.type, e.quantity, e.price, e.amount, e.fee, e.settlement, e.status])].map(e => e.map(e => `"${e}"`).join(",")).join("\n"), n = new Blob(["\ufeff" + t], { type: "text/csv;charset=utf-8;" }), o = document.createElement("a"); o.href = URL.createObjectURL(n), o.download = `bithumb_trades_${(new Date).toISOString().slice(0, 10)}.csv`, o.click() }(c), a("CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!") }), document.getElementById("copy-stats").addEventListener("click", () => { !function (e) { navigator.clipboard.writeText(e).then(() => { a("í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!") }) }(`ë¹—ì¸ ê±°ë˜ í†µê³„${d.dateFrom || d.dateTo ? `\nê¸°ê°„: ${d.dateFrom ? d.dateFrom.toLocaleDateString() : "ì‹œì‘"} ~ ${d.dateTo ? d.dateTo.toLocaleDateString() : "ì¢…ë£Œ"}` : ""}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nì´ ê±°ë˜ ê±´ìˆ˜: ${c.length}ê±´\nì´ ì •ì‚°ê¸ˆì•¡: ${l.totalSettlement.toLocaleString()}\nì´ ìˆ˜ìˆ˜ë£Œ: ${l.totalFee.toLocaleString()}\në§¤ìˆ˜: ${l.buyCount}ê±´ / ë§¤ë„: ${l.sellCount}ê±´\nì…ê¸ˆ: ${l.depositCount}ê±´ / ì¶œê¸ˆ: ${l.withdrawCount}ê±´\n\nê±°ë˜ ìœ í˜•ë³„:\n${Object.entries(l.types).map(([e, t]) => `  ${e}: ${t.count}ê±´, ${t.settlement >= 0 ? "+" : ""}${t.settlement.toLocaleString()}`).join("\n")}`) }), document.getElementById("reset-filter").addEventListener("click", () => { d = { type: null, asset: null, search: "", searchInput: "", dateFrom: null, dateTo: null }, e() }), document.querySelectorAll("button").forEach(e => { e.addEventListener("mouseenter", () => { e.style.transform = "translateY(-2px)", e.style.boxShadow = "0 6px 25px rgba(0,0,0,0.3)" }), e.addEventListener("mouseleave", () => { e.style.transform = "translateY(0)"; e.style.boxShadow = { "export-csv": "0 4px 15px rgba(102, 126, 234, 0.4)", "copy-stats": "0 4px 15px rgba(240, 147, 251, 0.4)", "reset-filter": "0 4px 15px rgba(79, 172, 254, 0.4)", "search-btn": "0 4px 15px rgba(102, 126, 234, 0.4)", "apply-date-filter": "0 4px 15px rgba(67, 233, 123, 0.4)", "clear-date-filter": "none", "start-auto-load": "0 4px 15px rgba(245, 158, 11, 0.4)" }[e.id] || "none" }) }), m.addEventListener("focus", () => { m.style.borderColor = "#667eea", m.style.boxShadow = "0 0 0 3px rgba(102, 126, 234, 0.1)" }), m.addEventListener("blur", () => { m.style.borderColor = "#e0e7ff", m.style.boxShadow = "none" }) }(), document.getElementById("close-panel").addEventListener("click", () => { s.remove() }), document.getElementById("overlay").addEventListener("click", e => { "overlay" === e.target.id && s.remove() }); const l = document.getElementById("close-panel"); l.addEventListener("mouseenter", () => { l.style.background = "rgba(255,255,255,0.3)", l.style.transform = "rotate(90deg)" }), l.addEventListener("mouseleave", () => { l.style.background = "rgba(255,255,255,0.2)", l.style.transform = "rotate(0deg)" }); const p = e => { "Escape" === e.key && (s.remove(), document.removeEventListener("keydown", p)) }; document.addEventListener("keydown", p) })();
